<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="So funktionieren unsere Grammar Games: kurze, multisensorische √úbungen mit Karten. Gleicher Look & Feel wie die Spiele ‚Äì jetzt ausprobieren."/>
  <title>Grammar Games ‚Äì Vorschau</title>

  <link rel="stylesheet" href="shared.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet"/>

  <style>
    /* nur lokales Styling ‚Äì KEIN eigener Body-Background hier! */
    .container{max-width:1100px;margin:0 auto;padding:0 18px 42px;}

    /* Topbar wie in den Games */
    .gg-topbar{
      display:flex; align-items:center; gap:12px;
      padding:14px 18px; position:sticky; top:0; z-index:1050;
      backdrop-filter:saturate(140%) blur(8px);
    }
    .gg-flex-spacer{ flex:1; }

    .gg-btn{
      display:inline-flex; align-items:center; gap:.5rem;
      height:38px; padding:0 14px; border-radius:22px;
      font:600 14px/1.1 "Poppins",system-ui,Segoe UI,Arial,sans-serif;
      text-decoration:none; cursor:pointer; user-select:none;
      transition:.18s ease; border:1.5px solid transparent; color:#fff;
    }
    .gg-primary{ background:#FF6B6B; border-color:#FF6B6B; box-shadow:0 6px 18px rgba(255,107,107,.28); }
    .gg-primary:hover{ transform:translateY(-1px); background:#ff5a5a; }
    .gg-ghost{ background:transparent; color:#fff; border-color:rgba(255,255,255,.35); }
    .gg-ghost:hover{ background:rgba(255,255,255,.10); }
    .gg-lang.gg-active{ background:#FF6B6B; color:#fff; border-color:#FF6B6B; box-shadow:0 6px 18px rgba(255,107,107,.28); }
    .gg-back{ margin-right:8px; }

    /* √úberschriften */
    .title-wrap{text-align:center;margin:10px 0 24px}
    .title{font-size:clamp(28px,3.4vw,40px);line-height:1.2;color:#fff;font-weight:800}
    .subtitle{color:#fff;opacity:.9;margin-top:6px}

    /* Kartenabschnitte */
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.40), rgba(255,255,255,.22));
      border-radius:18px; padding:20px 20px 18px; margin:20px 0;
      box-shadow:0 18px 40px rgba(0,0,0,.12), inset 0 1px 0 rgba(255,255,255,.35);
      border:1px solid rgba(255,255,255,.35);
    }
    .card h3{font-size:20px;margin:0 0 12px;display:flex;align-items:center;gap:10px;color:#fff;font-weight:800}
    .card p{margin:0 0 16px;color:#fff;opacity:.95}

    /* Vorschau-Strips */
    .strip{
      background:linear-gradient(180deg,rgba(255,255,255,.25),rgba(255,255,255,.15));
      border:1px solid rgba(255,255,255,.55);
      border-radius:16px; padding:16px;
      display:flex; justify-content:center; gap:18px; align-items:center;
    }
    .pair{
      position:relative; display:flex; gap:12px; align-items:center;
      padding:10px; border-radius:14px; background:rgba(255,255,255,.55);
      box-shadow:0 6px 16px rgba(0,0,0,.08); border:1px solid rgba(255,255,255,.75)
    }
    .pair .check{
      position:absolute; left:-8px; top:-8px; background:#fff; border:3px solid #c8f7cf;
      color:#38c172; border-radius:999px; font-size:14px; line-height:1; padding:4px 6px;
      box-shadow:0 8px 16px rgba(56,193,114,.25)
    }
    .tile{
      background:#fff; border-radius:16px; padding:8px; display:flex; align-items:center; justify-content:center;
      width:110px; height:110px; border:3px solid #e8f0ff; box-shadow:0 8px 16px rgba(0,0,0,.08)
    }
    .tile img{width:90%; height:90%; object-fit:contain}
    .cta-row{display:flex; justify-content:center; margin-top:14px}
  </style>
</head>
<body>
  <!-- Topbar -->
  <div class="gg-topbar">
    <a class="gg-btn gg-primary gg-back back-link" href="#">
      <span class="arrow">‚Üê</span>
      <span class="back-text" data-translate="backButton">Zur√ºck</span>
    </a>

    <div class="gg-flex-spacer"></div>

    <a class="gg-btn gg-ghost gg-lang lang-link" data-lang="de" href="#">Deutsch</a>
    <a class="gg-btn gg-ghost gg-lang lang-link" data-lang="zh" href="#">‰∏≠Êñá</a>
  </div>

  <div class="container">
    <div class="title-wrap">
      <h1 class="title" data-translate="previewTitle">So funktionieren unsere Grammar Games</h1>
      <div class="subtitle" data-translate="previewSubtitle">
        Printable Karten mit einfachen Routinen f√ºr zu Hause
      </div>
    </div>

    <!-- Game 1: Memory -->
    <section class="card">
      <h3>üß† <span data-translate="game1TitleMemory">Memory: Karte zu Karte (Drag & Drop)</span></h3>
      <p data-translate="game1SubtitleMemory">
        Ziehe passende Karten zusammen (z. B. <em>I</em> ‚Üî <em>ich</em>). Finde 6 Paare.
      </p>

      <div class="strip" aria-label="Vorschau Spiel 1">
        <div class="pair">
          <span class="check">‚úì</span>
          <div class="tile"><img src="cards/german_I.png" alt="I"></div>
          <div class="tile"><img src="cards/german_ich.png" alt="ich"></div>
        </div>
        <div class="pair">
          <span class="check">‚úì</span>
          <div class="tile"><img src="cards/german_am.png" alt="am"></div>
          <div class="tile"><img src="cards/german_bin.png" alt="bin"></div>
        </div>
      </div>

      <div class="cta-row">
        <a class="gg-btn gg-primary link-game1" href="card-game.html" data-translate="playGame1Now">‚ñ∂ Spiel 1 jetzt spielen</a>
      </div>
    </section>

    <!-- Game 2: Sortierspiel -->
    <section class="card">
      <h3>üß© <span data-translate="game2TitleSort">Sortieren: Karten in Felder (Drag & Drop)</span></h3>
      <p data-translate="game2SubtitleSort">Ziehe passende Karten in die richtigen Felder (z. B. I ‚Üî ich). Baue 3 richtige Reihen.</p>

      <div class="strip" aria-label="Vorschau Spiel 2">
        <div class="tile"><img src="cards/german_ich.png" alt="ich"></div>
        <div class="tile"><img src="cards/german_bin.png" alt="bin"></div>
        <span>=</span>
        <div class="tile"><img src="cards/german_I.png" alt="I"></div>
        <div class="tile"><img src="cards/german_am.png" alt="am"></div>
      </div>

      <div class="cta-row">
        <a class="gg-btn gg-primary link-game2" href="sorting-game.html" data-translate="playGame2Now">‚ñ∂ Spiel 2 jetzt spielen</a>
      </div>
    </section>

    <div class="cta-row" style="margin-top:26px">
      <a class="gg-btn gg-primary footer-cta" href="chooser.html" data-translate="suitableGames">Passende Spiele f√ºr mein Kind</a>
    </div>
  </div>

  <script src="language.js"></script>
  <script src="analytics.js"></script>
  <script>
    (function(){
      const qs = new URLSearchParams(location.search);
      const VARIANT = (qs.get('variant') || 'A').toUpperCase();
      const LANG    = (qs.get('lang') || localStorage.getItem('grammarGamesLanguage') || 'de').toLowerCase();

      // Back-Text
      try {
        const t = (k)=> window.languageSystem?.t?.(k) || k;
        const backText = document.querySelector('.back-link .back-text');
        if (backText) backText.textContent = t('backButton');
      } catch(_) {}

      // Back ‚Üí index.html (Params)
      document.querySelectorAll('.back-link').forEach(a=>{
        const u = new URL('index.html', location.href);
        u.searchParams.set('variant', VARIANT);
        u.searchParams.set('lang', LANG);
        a.href = u.pathname + '?' + u.searchParams.toString();
      });

      // Sprache aktiv markieren + Wechsel
      document.querySelectorAll('.lang-link').forEach(btn=>{
        if (btn.dataset.lang === LANG) btn.classList.add('gg-active');
        btn.addEventListener('click', (e)=>{
          e.preventDefault();
          const lang = btn.dataset.lang;
          localStorage.setItem('grammarGamesLanguage', lang);
          const u = new URL(location.href);
          u.searchParams.set('lang', lang);
          location.href = u.pathname + '?' + u.searchParams.toString();
        });
      });

      /* swap demo images by lang (Game 1 & 2) */
      (function(){
        try{
          // Game 1
          const imgs1 = document.querySelectorAll('.strip .pair .tile img');
          if (LANG === 'zh' && imgs1.length >= 4) {
            imgs1[0].src = 'cards/mandarin_I.png';      imgs1[0].alt = 'I';
            imgs1[1].src = 'cards/mandarin_wo.png';     imgs1[1].alt = 'wo';
            imgs1[2].src = 'cards/mandarin_am.png';     imgs1[2].alt = 'am';
            imgs1[3].src = 'cards/mandarin_wo_shi.png'; imgs1[3].alt = 'wo shi';
          } else if (imgs1.length >= 4) {
            imgs1[0].src = 'cards/german_I.png';   imgs1[0].alt = 'I';
            imgs1[1].src = 'cards/german_ich.png'; imgs1[1].alt = 'ich';
            imgs1[2].src = 'cards/german_am.png';  imgs1[2].alt = 'am';
            imgs1[3].src = 'cards/german_bin.png'; imgs1[3].alt = 'bin';
          }

          // Game 2
          const strips = document.querySelectorAll('.strip');
          if (strips.length >= 2) {
            const imgs2 = strips[1].querySelectorAll('.tile img');
            if (LANG === 'zh' && imgs2.length >= 4) {
              imgs2[0].src = 'cards/mandarin_wo.png';      imgs2[0].alt = 'wo';
              imgs2[1].src = 'cards/mandarin_wo_shi.png';  imgs2[1].alt = 'wo shi';
              imgs2[2].src = 'cards/mandarin_I.png';       imgs2[2].alt = 'I';
              imgs2[3].src = 'cards/mandarin_am.png';      imgs2[3].alt = 'am';
            } else if (imgs2.length >= 4) {
              imgs2[0].src = 'cards/german_ich.png'; imgs2[0].alt = 'ich';
              imgs2[1].src = 'cards/german_bin.png'; imgs2[1].alt = 'bin';
              imgs2[2].src = 'cards/german_I.png';   imgs2[2].alt = 'I';
              imgs2[3].src = 'cards/german_am.png';  imgs2[3].alt = 'am';
            }
          }
        }catch(_){}
      })();

      // CTAs: Params mitgeben
      document.querySelectorAll('.link-game1, .link-game2, .footer-cta').forEach(a=>{
        const url = new URL(a.getAttribute('href'), location.href);
        url.searchParams.set('variant', VARIANT);
        url.searchParams.set('lang', LANG);
        a.href = url.pathname + '?' + url.searchParams.toString();
      });
    })();
  </script>
</body>
</html>
