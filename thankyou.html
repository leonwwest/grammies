<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Grammar Games ‚Äì Danke!</title>

  <!-- Global styles -->
  <link rel="stylesheet" href="shared.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet"/>

  <style>
    :root{
      --gg-orange:#FF6B6B;
      --gg-orange-dark:#ff5a5a;
    }

    .wrap{ max-width:1000px; margin:0 auto; padding:0 18px 84px; }

    /* Header */
    .emoji{ font-size:56px; text-align:center; margin:24px 0 6px; }
    .title{ text-align:center; color:#fff; font-size:clamp(32px,4.5vw,56px); font-weight:800; margin:0; }
    .sub{ text-align:center; color:#fff; opacity:.95; margin-top:8px; }

    /* White card (CN design) */
    .board{
      margin:36px auto 0;
      background:#fff;
      border:1px solid rgba(0,0,0,.06);
      border-radius:26px;
      box-shadow:0 30px 60px rgba(0,0,0,.12);
      overflow:hidden;
    }
    .row{
      display:flex; align-items:center; gap:18px;
      padding:22px;
    }
    .row + .row{ border-top:1px solid rgba(0,0,0,.06); }
    .badge{
      flex:0 0 54px; height:54px; width:54px; border-radius:999px;
      display:grid; place-items:center; font-size:24px; color:#fff;
      background: linear-gradient(180deg, #ffa6a6, #ff6b6b);
      box-shadow:0 10px 22px rgba(255,107,107,.25);
    }
    .row h3{ margin:0; font-size:20px; color:#0f172a; font-weight:800; }
    .row p{ margin:6px 0 0; color:#334155; font-weight:500; }

    /* CTA ‚Äì ohne Unterstrich + zentriert */
    .cta{ display:flex; justify-content:center; margin-top:26px; }
    .cta .btn,
    .cta .btn:visited,
    .cta .btn:active{
      height:56px; padding:0 26px; border-radius:30px; border:1.5px solid transparent;
      font:800 18px/1 "Poppins",system-ui,Segoe UI,Arial,sans-serif;
      color:#fff; background:var(--gg-orange); box-shadow:0 10px 24px rgba(255,107,107,.28);
      display:inline-flex; align-items:center; justify-content:center;
      text-decoration:none; cursor:pointer; transition:.18s ease;
    }
    .cta .btn:hover{
      transform:translateY(-1px);
      background:var(--gg-orange-dark);
      text-decoration:none;
    }
  </style>
</head>
<body>
  <!-- Topbar (Styles kommen aus shared.css) -->
  <div class="gg-topbar">
    <a class="gg-btn gg-primary gg-back back-link" href="#">
      <span class="arrow">‚Üê</span>
      <span data-translate="backButton">Zur√ºck</span>
    </a>
    <div class="gg-flex-spacer"></div>
    <a class="gg-btn gg-ghost gg-lang lang-link" data-lang="de" href="#">Deutsch</a>
    <a class="gg-btn gg-ghost gg-lang lang-link" data-lang="zh" href="#">‰∏≠Êñá</a>
  </div>

  <div class="wrap">
    <div class="emoji">üéâ</div>
    <h1 class="title" data-translate="thankYouTitle">Danke!</h1>
    <p class="sub" data-translate="packOnTheWay">Dein Starter-Pack ist unterwegs.</p>

    <section class="board">
      <div class="row">
        <div class="badge">üìß</div>
        <div>
          <h3 data-translate="emailSent">E-Mail gesendet</h3>
          <p data-translate="checkInbox">Bitte Posteingang pr√ºfen (inkl. Spam).</p>
        </div>
      </div>
      <div class="row">
        <div class="badge">‚¨áÔ∏è</div>
        <div>
          <h3 data-translate="immediatelyAvailable">Sofort verf√ºgbar</h3>
          <p data-translate="pdfReady">PDF-Download steht bereit.</p>
        </div>
      </div>
      <div class="row">
        <div class="badge">üéÆ</div>
        <div>
          <h3 data-translate="getStarted">Loslegen</h3>
          <!-- Dieser Text wird mit {age} aus dem Queryparam gef√ºllt -->
          <p id="ageLine"></p>
        </div>
      </div>
    </section>

    <div class="cta">
      <a class="btn" id="startOverBtn" href="#" data-translate="startOver">Neu starten</a>
    </div>
  </div>

  <script src="language.js"></script>
  <script src="analytics.js"></script>
  <script>
    (function(){
      const qs  = new URLSearchParams(location.search);
      const VARIANT = (qs.get('variant') || 'A').toUpperCase();

      // Sprache aus Query/localStorage √ºbernehmen & anwenden
      const LANG = window.languageSystem.setLanguageFromQuery(qs.get('lang'));
      try { document.documentElement.setAttribute('lang', LANG); } catch(_) {}

      // Sprachen umschalten (URL-Param aktualisieren)
      document.querySelectorAll('.lang-link').forEach(btn=>{
        btn.addEventListener('click', (e)=>{
          e.preventDefault();
          const lang = btn.dataset.lang;
          const u = new URL(location.href);
          u.searchParams.set('lang', lang);
          window.languageSystem.setLanguage(lang);
          location.href = u.pathname + '?' + u.searchParams.toString();
        });
        btn.setAttribute('aria-current', btn.dataset.lang === LANG ? 'page' : 'false');
      });

      // Zur√ºck-Link mit Params
      document.querySelectorAll('.back-link').forEach(a=>{
        const u = new URL('index.html', location.href);
        u.searchParams.set('variant', VARIANT);
        u.searchParams.set('lang', LANG);
        a.href = u.pathname + '?' + u.searchParams.toString();
      });

      // Alterszeile bef√ºllen (gamesReadyAge mit {age})
      const AGE = (qs.get('age') || '').trim();
      const ageLine = document.getElementById('ageLine');
      if (ageLine){
        // Normalize to display en-dash labels for either "4-6"/"46" and "7-10"/"710"
        let label = '';
        if (AGE === '4-6' || AGE === '46') label = '4‚Äì6';
        else if (AGE === '7-10' || AGE === '710') label = '7‚Äì10';
        else label = AGE;
        if (label) {
          const tpl = window.languageSystem.t('gamesReadyAge') || '';
          ageLine.textContent = tpl.replace('{age}', label);
        } else {
          // Fallback: nur kurzer Satz
          ageLine.textContent = window.languageSystem.t('pdfReady');
        }
      }

      // CTA ‚ÄûNeu starten‚Äú ‚Üí zur√ºck zur Startseite (Params behalten)
      const startOver = document.getElementById('startOverBtn');
      if (startOver){
        const u = new URL('index.html', location.href);
        u.searchParams.set('variant', VARIANT);
        u.searchParams.set('lang', LANG);
        startOver.href = u.pathname + '?' + u.searchParams.toString();
        startOver.addEventListener('click', ()=> {
          try { window.analytics?.trackClick?.('thankyou_start_over'); } catch(_) {}
        });
      }
    })();
  </script>
</body>
</html>
